import{_ as V,a as F}from"./_plugin-vue_export-helper-C_lUuKz4.js";import{E as M,m as b,F as x,d as S,c as h,ah as A,v as e,w as r,b as i,s as _,a,g as p,x as H,H as P,y as v,h as m,C as k,J as R,I as T,o as d,j as J,Z as D,k as Y,ac as C,V as Z,ai as G,O as K,al as W,ag as X,r as tt,l as et}from"./index-BaQgaqTq.js";const I=[{id:"pickup",name:"Самовывоз",price:0,description:"Бесплатно",estimatedDays:"Сегодня"},{id:"courier",name:"Курьер",price:350,description:"Доставка по городу",estimatedDays:"1-2 дня"},{id:"cdek",name:"СДЭК",price:450,description:"Пункт выдачи",estimatedDays:"3-5 дней"},{id:"post",name:"Почта России",price:300,description:"Почтовое отделение",estimatedDays:"7-14 дней"}],q=M("cart",()=>{const c=b([]),t=b(!1),u=b("pickup"),f=b({name:"",phone:"",email:"",address:"",comment:""}),o=x(()=>c.value.reduce((l,n)=>l+n.quantity,0)),s=x(()=>c.value.reduce((l,n)=>l+n.price*n.quantity,0)),g=x(()=>I.find(n=>n.id===u.value)?.price||0),z=x(()=>s.value+g.value),B=x(()=>I.find(l=>l.id===u.value));function j(l){const n=c.value.find(y=>y.productId===l.id);n?n.quantity++:c.value.push({productId:l.id,name:l.name,price:l.price,image:l.image,quantity:1}),t.value=!0}function w(l){const n=c.value.findIndex(y=>y.productId===l);n!==-1&&c.value.splice(n,1)}function N(l){const n=c.value.find(y=>y.productId===l);n&&n.quantity++}function $(l){const n=c.value.find(y=>y.productId===l);n&&n.quantity>1?n.quantity--:n&&w(l)}function E(){c.value=[]}function O(){t.value=!t.value}function L(){t.value=!0}function Q(){t.value=!1}function U(){f.value={name:"",phone:"",email:"",address:"",comment:""}}return{items:c,isOpen:t,selectedDelivery:u,customerInfo:f,totalItems:o,subtotal:s,deliveryPrice:g,total:z,deliveryMethod:B,addItem:j,removeItem:w,incrementQuantity:N,decrementQuantity:$,clearCart:E,toggleCart:O,openCart:L,closeCart:Q,resetCustomerInfo:U}}),ot={class:"d-flex align-center justify-space-between pa-4 border-b"},st={class:"text-h6 font-weight-bold"},nt={key:0,class:"d-flex flex-column align-center justify-center h-100 pa-8"},at={key:1,class:"d-flex flex-column h-100"},lt={class:"flex-grow-1 overflow-y-auto pa-4"},it={class:"flex-grow-1"},rt={class:"text-body-1 font-weight-bold mb-1 text-truncate",style:{"max-width":"200px"}},ct={class:"text-body-2 font-weight-bold text-primary mb-2"},dt={class:"d-flex align-center"},ut={class:"px-3 font-weight-bold"},mt={class:"pa-4 border-t bg-grey-lighten-5"},pt={class:"d-flex justify-space-between mb-2"},ft={class:"text-body-2 font-weight-bold"},gt={class:"d-flex justify-space-between mb-4"},yt={class:"text-h6 font-weight-bold text-primary"},vt=S({__name:"CartDrawer",setup(c){const t=q(),u=f=>new Intl.NumberFormat("ru-RU").format(f)+" ₽";return(f,o)=>(d(),h(A,{modelValue:e(t).isOpen,"onUpdate:modelValue":o[0]||(o[0]=s=>e(t).isOpen=s),location:"right",temporary:"",width:"420",class:"cart-drawer"},{default:r(()=>[i("div",ot,[i("h2",st,[o[1]||(o[1]=p(" Корзина ",-1)),e(t).totalItems>0?(d(),h(P,{key:0,size:"small",color:"primary",class:"ml-2"},{default:r(()=>[p(v(e(t).totalItems),1)]),_:1})):H("",!0)]),a(m,{icon:"mdi-close",variant:"text",onClick:e(t).closeCart},null,8,["onClick"])]),e(t).items.length===0?(d(),_("div",nt,[a(k,{icon:"mdi-cart-outline",size:"80",color:"grey-lighten-2",class:"mb-4"}),o[3]||(o[3]=i("h3",{class:"text-h6 font-weight-bold mb-2"},"Корзина пуста",-1)),o[4]||(o[4]=i("p",{class:"text-body-2 text-grey text-center mb-6"},"Добавьте товары, чтобы начать покупки",-1)),a(m,{color:"primary",variant:"flat",class:"text-none font-weight-bold",rounded:"lg",to:"/shop/catalog",onClick:e(t).closeCart},{default:r(()=>[...o[2]||(o[2]=[p(" Перейти в каталог ",-1)])]),_:1},8,["onClick"])])):(d(),_("div",at,[i("div",lt,[(d(!0),_(R,null,T(e(t).items,s=>(d(),_("div",{key:s.productId,class:"d-flex gap-3 mb-4 pb-4 border-b"},[a(J,{width:"80",height:"80",color:"grey-lighten-4",class:"rounded-lg flex-shrink-0 d-flex align-center justify-center"},{default:r(()=>[s.image?(d(),h(D,{key:0,src:s.image,width:"80",height:"80",cover:"",class:"rounded-lg"},null,8,["src"])):(d(),h(k,{key:1,icon:"mdi-image-outline",color:"grey-lighten-2",size:"32"}))]),_:2},1024),i("div",it,[i("h4",rt,v(s.name),1),i("div",ct,v(u(s.price)),1),i("div",dt,[a(m,{icon:"mdi-minus",variant:"outlined",size:"x-small",density:"compact",onClick:g=>e(t).decrementQuantity(s.productId)},null,8,["onClick"]),i("span",ut,v(s.quantity),1),a(m,{icon:"mdi-plus",variant:"outlined",size:"x-small",density:"compact",onClick:g=>e(t).incrementQuantity(s.productId)},null,8,["onClick"])])]),a(m,{icon:"mdi-trash-can-outline",variant:"text",color:"red",size:"small",onClick:g=>e(t).removeItem(s.productId)},null,8,["onClick"])]))),128))]),i("div",mt,[i("div",pt,[o[5]||(o[5]=i("span",{class:"text-body-2 text-grey"},"Товаров:",-1)),i("span",ft,v(e(t).totalItems)+" шт.",1)]),i("div",gt,[o[6]||(o[6]=i("span",{class:"text-body-1 font-weight-bold"},"Итого:",-1)),i("span",yt,v(u(e(t).subtotal)),1)]),a(m,{block:"",size:"large",color:"primary",variant:"flat",class:"text-none font-weight-bold mb-2",rounded:"lg",to:"/shop/checkout",onClick:e(t).closeCart},{default:r(()=>[...o[7]||(o[7]=[p(" Оформить заказ ",-1)])]),_:1},8,["onClick"]),a(m,{block:"",variant:"text",class:"text-none",onClick:e(t).closeCart},{default:r(()=>[...o[8]||(o[8]=[p(" Продолжить покупки ",-1)])]),_:1},8,["onClick"])])]))]),_:1},8,["modelValue"]))}}),xt=V(vt,[["__scopeId","data-v-3804c124"]]),ht={class:"hidden-sm-and-down mr-8"},_t=S({__name:"ShopLayout",setup(c){const t=F(),u=q(),f=x(()=>({backgroundColor:t.settings.backgroundColor,color:t.settings.textColor}));return(o,s)=>{const g=G("router-link");return d(),h(Y,{style:C(f.value)},{default:r(()=>[a(X,{color:e(t).settings.backgroundColor,flat:"",class:"border-b",height:"80"},{default:r(()=>[a(Z,{class:"d-flex align-center mw-1200 pa-0"},{default:r(()=>[a(g,{to:"/shop/preview",class:"text-decoration-none"},{default:r(()=>[e(t).settings.logoUrl?(d(),h(D,{key:0,src:e(t).settings.logoUrl,height:"48","max-width":"160",contain:""},null,8,["src"])):(d(),_("h2",{key:1,class:"font-weight-bold text-h5",style:C({color:e(t).settings.primaryColor})},v(e(t).settings.name),5))]),_:1}),a(K),i("div",ht,[a(m,{variant:"text",to:"/shop/preview",class:"text-none",style:C({color:e(t).settings.textColor})},{default:r(()=>[...s[0]||(s[0]=[p(" Главная ",-1)])]),_:1},8,["style"]),a(m,{variant:"text",to:"/shop/catalog",class:"text-none",style:C({color:e(t).settings.textColor})},{default:r(()=>[...s[1]||(s[1]=[p(" Каталог ",-1)])]),_:1},8,["style"])]),a(m,{icon:"",variant:"text",onClick:e(u).openCart},{default:r(()=>[a(W,{content:e(u).totalItems,color:e(t).settings.primaryColor,floating:"","model-value":e(u).totalItems>0},{default:r(()=>[a(k,{color:e(t).settings.textColor},{default:r(()=>[...s[2]||(s[2]=[p("mdi-shopping-outline",-1)])]),_:1},8,["color"])]),_:1},8,["content","color","model-value"])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["color"]),a(et,null,{default:r(()=>[tt(o.$slots,"default",{},void 0,!0)]),_:3}),a(xt)]),_:3},8,["style"])}}}),kt=V(_t,[["__scopeId","data-v-b44f777e"]]);export{I as D,kt as S,q as u};
