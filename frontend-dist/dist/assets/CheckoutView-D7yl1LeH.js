import{u as j,S as F,D as M}from"./ShopLayout-BNRZgYQN.js";import{a as P,_ as L}from"./_plugin-vue_export-helper-C_lUuKz4.js";import{d as $,F as D,m as w,$ as q,c as v,w as n,a,b as l,ac as d,v as r,n as f,C as S,h as C,g,e as U,f as x,t as h,x as O,a8 as G,s as k,I as N,J as R,a6 as H,i as T,y as i,V as J,R as Y,o as m,S as A,a9 as K}from"./index-BaQgaqTq.js";const Q={class:"d-flex align-center"},W={class:"ml-3 flex-grow-1"},X={class:"mb-4"},Z={class:"d-flex justify-space-between mb-2"},ee={class:"d-flex justify-space-between mb-4"},le={class:"d-flex justify-space-between mb-6"},te={class:"text-body-1 text-grey mb-2"},oe=$({__name:"CheckoutView",setup(ae){const _=P(),o=j(),s=D(()=>_.settings),p=D(()=>_.isDarkTheme),z=M,V=w(!1),b=w(!1),I=w(""),u=q({name:"",phone:"",address:""}),y=c=>new Intl.NumberFormat("ru-RU").format(c)+" ₽",B=()=>{u.name="",u.phone="",u.address="";let c=!0;return o.customerInfo.name.trim()||(u.name="Укажите имя",c=!1),o.customerInfo.phone.trim()||(u.phone="Укажите телефон",c=!1),o.selectedDelivery!=="pickup"&&!o.customerInfo.address.trim()&&(u.address="Укажите адрес доставки",c=!1),c},E=async()=>{B()&&(V.value=!0,await new Promise(c=>setTimeout(c,1500)),I.value=String(1e5+Math.floor(Math.random()*9e5)),o.clearCart(),o.resetCustomerInfo(),V.value=!1,b.value=!0)};return(c,t)=>(m(),v(F,null,{default:n(()=>[a(J,{class:"py-8 mw-900"},{default:n(()=>[l("h1",{class:"text-h4 font-weight-bold mb-8 text-center",style:d({color:s.value.textColor})}," Оформление заказа ",4),r(o).items.length===0?(m(),v(f,{key:0,class:"rounded-xl pa-12 text-center",flat:"",color:p.value?"grey-darken-4":"grey-lighten-5"},{default:n(()=>[a(S,{icon:"mdi-cart-outline",size:"80",color:"grey",class:"mb-4"}),l("h3",{class:"text-h6 font-weight-bold mb-2",style:d({color:s.value.textColor})}," Корзина пуста ",4),l("p",{class:"text-body-2 mb-6",style:d({color:s.value.textColor,opacity:.7})}," Добавьте товары для оформления заказа ",4),a(C,{color:s.value.primaryColor,variant:"flat",class:"text-white text-none font-weight-bold",rounded:"lg",to:"/shop/catalog"},{default:n(()=>[...t[8]||(t[8]=[g(" Перейти в каталог ",-1)])]),_:1},8,["color"])]),_:1},8,["color"])):(m(),v(U,{key:1},{default:n(()=>[a(x,{cols:"12",md:"7"},{default:n(()=>[a(f,{class:"rounded-xl pa-6 mb-6",flat:"",color:p.value?"grey-darken-4":"white"},{default:n(()=>[l("h2",{class:"text-h6 font-weight-bold mb-4",style:d({color:s.value.textColor})}," Контактные данные ",4),a(U,null,{default:n(()=>[a(x,{cols:"12",sm:"6"},{default:n(()=>[a(h,{modelValue:r(o).customerInfo.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r(o).customerInfo.name=e),label:"Имя *",variant:"outlined",density:"comfortable","hide-details":"auto","error-messages":u.name},null,8,["modelValue","error-messages"])]),_:1}),a(x,{cols:"12",sm:"6"},{default:n(()=>[a(h,{modelValue:r(o).customerInfo.phone,"onUpdate:modelValue":t[1]||(t[1]=e=>r(o).customerInfo.phone=e),label:"Телефон *",variant:"outlined",density:"comfortable","hide-details":"auto","error-messages":u.phone,placeholder:"+7 (999) 123-45-67"},null,8,["modelValue","error-messages"])]),_:1}),a(x,{cols:"12"},{default:n(()=>[a(h,{modelValue:r(o).customerInfo.email,"onUpdate:modelValue":t[2]||(t[2]=e=>r(o).customerInfo.email=e),label:"Email",type:"email",variant:"outlined",density:"comfortable","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["color"]),a(f,{class:"rounded-xl pa-6 mb-6",flat:"",color:p.value?"grey-darken-4":"white"},{default:n(()=>[l("h2",{class:"text-h6 font-weight-bold mb-4",style:d({color:s.value.textColor})}," Способ доставки ",4),a(G,{modelValue:r(o).selectedDelivery,"onUpdate:modelValue":t[3]||(t[3]=e=>r(o).selectedDelivery=e),"hide-details":""},{default:n(()=>[(m(!0),k(R,null,N(r(z),e=>(m(),v(f,{key:e.id,class:A(["pa-4 mb-3 rounded-lg cursor-pointer",{"border-primary":r(o).selectedDelivery===e.id}]),flat:"",color:p.value?"grey-darken-3":"grey-lighten-5",onClick:se=>r(o).selectedDelivery=e.id},{default:n(()=>[l("div",Q,[a(K,{value:e.id,"hide-details":"",class:"ma-0 pa-0"},null,8,["value"]),l("div",W,[l("div",{class:"font-weight-bold",style:d({color:s.value.textColor})},i(e.name),5),l("div",{class:"text-body-2",style:d({color:s.value.textColor,opacity:.7})},i(e.description)+" · "+i(e.estimatedDays),5)]),l("div",{class:"font-weight-bold",style:d({color:s.value.primaryColor})},i(e.price===0?"Бесплатно":y(e.price)),5)])]),_:2},1032,["class","color","onClick"]))),128))]),_:1},8,["modelValue"]),r(o).selectedDelivery!=="pickup"?(m(),v(h,{key:0,modelValue:r(o).customerInfo.address,"onUpdate:modelValue":t[4]||(t[4]=e=>r(o).customerInfo.address=e),label:"Адрес доставки *",variant:"outlined",density:"comfortable","hide-details":"auto",class:"mt-4","error-messages":u.address},null,8,["modelValue","error-messages"])):O("",!0)]),_:1},8,["color"]),a(f,{class:"rounded-xl pa-6",flat:"",color:p.value?"grey-darken-4":"white"},{default:n(()=>[l("h2",{class:"text-h6 font-weight-bold mb-4",style:d({color:s.value.textColor})}," Комментарий к заказу ",4),a(H,{modelValue:r(o).customerInfo.comment,"onUpdate:modelValue":t[5]||(t[5]=e=>r(o).customerInfo.comment=e),placeholder:"Дополнительные пожелания...",variant:"outlined",density:"comfortable",rows:"3","hide-details":""},null,8,["modelValue"])]),_:1},8,["color"])]),_:1}),a(x,{cols:"12",md:"5"},{default:n(()=>[a(f,{class:"rounded-xl pa-6 sticky-card",flat:"",color:p.value?"grey-darken-4":"grey-lighten-5"},{default:n(()=>[l("h2",{class:"text-h6 font-weight-bold mb-4",style:d({color:s.value.textColor})}," Ваш заказ ",4),l("div",X,[(m(!0),k(R,null,N(r(o).items,e=>(m(),k("div",{key:e.productId,class:"d-flex justify-space-between mb-2"},[l("span",{class:"text-body-2",style:d({color:s.value.textColor})},i(e.name)+" × "+i(e.quantity),5),l("span",{class:"text-body-2 font-weight-bold",style:d({color:s.value.textColor})},i(y(e.price*e.quantity)),5)]))),128))]),a(T,{class:"mb-4"}),l("div",Z,[l("span",{style:d({color:s.value.textColor})},"Товары:",4),l("span",{class:"font-weight-bold",style:d({color:s.value.textColor})},i(y(r(o).subtotal)),5)]),l("div",ee,[l("span",{style:d({color:s.value.textColor})},"Доставка:",4),l("span",{class:"font-weight-bold",style:d({color:s.value.textColor})},i(r(o).deliveryPrice===0?"Бесплатно":y(r(o).deliveryPrice)),5)]),a(T,{class:"mb-4"}),l("div",le,[l("span",{class:"text-h6 font-weight-bold",style:d({color:s.value.textColor})},"Итого:",4),l("span",{class:"text-h5 font-weight-bold",style:d({color:s.value.primaryColor})},i(y(r(o).total)),5)]),a(C,{block:"",size:"x-large",color:s.value.primaryColor,variant:"flat",class:"text-white text-none font-weight-bold",rounded:"lg",loading:V.value,onClick:E},{default:n(()=>[...t[9]||(t[9]=[g(" Оформить заказ ",-1)])]),_:1},8,["color","loading"]),l("p",{class:"text-caption text-center mt-4",style:d({color:s.value.textColor,opacity:.6})}," Нажимая кнопку, вы соглашаетесь с условиями обработки персональных данных ",4)]),_:1},8,["color"])]),_:1})]),_:1}))]),_:1}),a(Y,{modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=e=>b.value=e),"max-width":"500",persistent:""},{default:n(()=>[a(f,{class:"rounded-xl text-center pa-8"},{default:n(()=>[a(S,{icon:"mdi-check-circle",color:"green",size:"80",class:"mb-4"}),t[12]||(t[12]=l("h2",{class:"text-h5 font-weight-bold mb-2"},"Заказ оформлен!",-1)),l("p",te,[t[10]||(t[10]=g(" Номер заказа: ",-1)),l("strong",null,"#"+i(I.value),1)]),t[13]||(t[13]=l("p",{class:"text-body-2 text-grey mb-6"}," Мы свяжемся с вами для подтверждения ",-1)),a(C,{color:s.value.primaryColor,variant:"flat",class:"text-white text-none font-weight-bold",rounded:"lg",to:"/shop/preview",onClick:t[6]||(t[6]=e=>b.value=!1)},{default:n(()=>[...t[11]||(t[11]=[g(" На главную ",-1)])]),_:1},8,["color"])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),ie=L(oe,[["__scopeId","data-v-22dcc01d"]]);export{ie as default};
