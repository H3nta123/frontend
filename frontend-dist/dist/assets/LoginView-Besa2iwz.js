import{d as v,c as x,k as h,w as a,a as s,r as w,l as k,o as n,u as C,m as c,V as S,n as A,b as d,p as B,q as z,s as f,t as F,v as o,h as p,g,x as N,y,z as $,A as j}from"./index-BaQgaqTq.js";const E=v({__name:"AuthLayout",setup(b){return(u,t)=>(n(),x(h,{class:"bg-grey-lighten-4"},{default:a(()=>[s(k,{class:"d-flex align-center justify-center",style:{"min-height":"100vh"}},{default:a(()=>[w(u.$slots,"default")]),_:3})]),_:3}))}}),L={key:0},q={key:1},M={class:"text-center mb-6"},R={class:"text-caption text-grey"},T={key:0,class:"text-red text-center text-caption mb-2"},U=v({__name:"AuthCard",setup(b){const u=j(),t=C(),m=c(1),r=c(""),i=c(""),V=async()=>{if(m.value===1)await t.sendLoginRequest(r.value)&&(m.value=2);else{if(!i.value||i.value.length<5)return;await t.verifyCode(r.value,i.value)&&u.push("/dashboard")}};return(_,e)=>(n(),x(S,{"fill-height":"",fluid:"",class:"d-flex align-center justify-center"},{default:a(()=>[s(A,{width:"450",elevation:"10",class:"pa-6 rounded-xl"},{default:a(()=>[e[8]||(e[8]=d("h2",{class:"text-h5 text-center mb-6 font-weight-bold"},"Вход в систему",-1)),s(B,{onSubmit:z(V,["prevent"])},{default:a(()=>[m.value===1?(n(),f("div",L,[e[4]||(e[4]=d("p",{class:"text-body-2 text-grey mb-4 text-center"}," Введите почту, чтобы получить код доступа ",-1)),s(F,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),label:"E-mail",variant:"outlined",type:"email",placeholder:"name@example.com","prepend-inner-icon":"mdi-email-outline",density:"comfortable",rules:[l=>!!l||"Обязательное поле",l=>/.+@.+\..+/.test(l)||"Некорректный E-mail"],autofocus:"","error-messages":o(t).error},null,8,["modelValue","rules","error-messages"]),s(p,{type:"submit",color:"#542F99",block:"",size:"large",class:"mt-4 text-white text-none font-weight-bold",rounded:"lg",loading:o(t).loading,elevation:"0"},{default:a(()=>[...e[3]||(e[3]=[g(" Получить код ",-1)])]),_:1},8,["loading"])])):(n(),f("div",q,[d("div",M,[e[5]||(e[5]=d("div",{class:"text-body-1 font-weight-bold mb-1"},"Введите код",-1)),d("div",R," Мы отправили его на "+y(r.value),1)]),s($,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=l=>i.value=l),length:"6",class:"mb-6 justify-center",variant:"outlined",color:"primary",disabled:o(t).loading},null,8,["modelValue","disabled"]),o(t).error?(n(),f("div",T,y(o(t).error),1)):N("",!0),s(p,{type:"submit",color:"#542F99",block:"",size:"large",class:"mt-2 text-white text-none font-weight-bold",rounded:"lg",loading:o(t).loading,elevation:"0"},{default:a(()=>[...e[6]||(e[6]=[g(" Войти ",-1)])]),_:1},8,["loading"]),s(p,{variant:"text",block:"",size:"small",class:"mt-4 text-grey",onClick:e[2]||(e[2]=l=>{m.value=1,o(t).error=""})},{default:a(()=>[...e[7]||(e[7]=[g(" ← Изменить почту ",-1)])]),_:1})]))]),_:1})]),_:1})]),_:1}))}}),I=v({__name:"LoginView",setup(b){return(u,t)=>(n(),x(E,null,{default:a(()=>[s(U)]),_:1}))}});export{I as default};
