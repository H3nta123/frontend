import{M as B}from"./MainLayout-cmQcMttl.js";import{u as D,_ as P}from"./_plugin-vue_export-helper-C_lUuKz4.js";import{d as S,m as y,B as j,c as i,w as l,b as o,s as h,a as t,C as g,h as d,g as n,v as c,K as M,L as T,y as u,n as v,e as I,I as _,J as k,M as L,N,P as R,Q as q,O as E,R as F,o as a,f as H,j as V,Z as C,H as z}from"./index-BaQgaqTq.js";const J={class:"d-flex justify-space-between align-center mb-8"},K={class:"d-flex align-center"},O={class:"bg-white border rounded-lg mr-4 d-flex pa-1",style:{"border-color":"#e0e0e0 !important"}},Q={key:0,class:"d-flex justify-center py-16"},U={class:"mb-1 font-weight-medium text-body-1"},Z={class:"text-blue font-weight-bold text-body-1 mb-2"},G={class:"d-flex gap-2"},W={class:"py-3 pl-6"},X={class:"font-weight-bold text-body-1"},Y={class:"text-blue font-weight-bold text-body-1"},ee={class:"text-body-2"},te={class:"text-right pr-6"},le=S({__name:"CatalogView",setup(se){const r=D(),f=y("grid"),m=y(!1),x=y(null);j(()=>{r.fetchProducts()});const p=b=>`${b.toLocaleString()} ₽`,w=b=>{x.value=b,m.value=!0},$=async()=>{if(!x.value)return;await r.deleteProduct(x.value.id)&&(m.value=!1,x.value=null)};return(b,e)=>(a(),i(B,null,{default:l(()=>[o("div",J,[e[5]||(e[5]=o("h1",{class:"text-h5 font-weight-bold text-black"},"Каталог товаров",-1)),o("div",K,[o("div",O,[t(d,{variant:"text",size:"small",rounded:"md",color:f.value==="grid"?"#4527A0":"grey",class:"min-w-0 px-2",onClick:e[0]||(e[0]=s=>f.value="grid")},{default:l(()=>[t(g,{icon:"mdi-view-grid"})]),_:1},8,["color"]),t(d,{variant:"text",size:"small",rounded:"md",color:f.value==="list"?"#4527A0":"grey",class:"min-w-0 px-2",onClick:e[1]||(e[1]=s=>f.value="list")},{default:l(()=>[t(g,{icon:"mdi-format-list-bulleted"})]),_:1},8,["color"])]),t(d,{color:"#4527A0","prepend-icon":"mdi-plus",class:"text-none text-white font-weight-bold px-6",height:"44",rounded:"lg",elevation:"0",to:"/products/new"},{default:l(()=>[...e[4]||(e[4]=[n(" Добавить товар ",-1)])]),_:1})])]),c(r).loading?(a(),h("div",Q,[t(M,{indeterminate:"",color:"#4527A0",size:"48"})])):c(r).error?(a(),i(T,{key:1,type:"error",class:"mb-4",closable:""},{default:l(()=>[n(u(c(r).error),1)]),_:1})):c(r).products.length===0?(a(),i(v,{key:2,class:"rounded-xl border pa-12 text-center",flat:""},{default:l(()=>[t(g,{icon:"mdi-package-variant",size:"64",color:"grey-lighten-1",class:"mb-4"}),e[7]||(e[7]=o("h3",{class:"text-h6 font-weight-bold mb-2"},"Товаров пока нет",-1)),e[8]||(e[8]=o("p",{class:"text-body-2 text-grey mb-6"},"Добавьте первый товар, чтобы начать продажи",-1)),t(d,{color:"#4527A0","prepend-icon":"mdi-plus",class:"text-none text-white font-weight-bold",rounded:"lg",to:"/products/new"},{default:l(()=>[...e[6]||(e[6]=[n(" Добавить товар ",-1)])]),_:1})]),_:1})):f.value==="grid"?(a(),i(I,{key:3},{default:l(()=>[(a(!0),h(k,null,_(c(r).products,s=>(a(),i(H,{key:s.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:l(()=>[t(v,{class:"pa-4 rounded-xl border h-100",flat:"",color:"white",style:{"border-color":"#eee !important"}},{default:l(()=>[t(V,{color:"grey-lighten-4",height:"220",class:"rounded-lg mb-4 d-flex align-center justify-center"},{default:l(()=>[s.images?.length?(a(),i(C,{key:1,src:s.images[0],height:"220",cover:"",class:"rounded-lg"},null,8,["src"])):(a(),i(g,{key:0,icon:"mdi-image-outline",size:"64",color:"grey-lighten-2"}))]),_:2},1024),o("div",U,u(s.name),1),o("div",Z,u(p(s.price)),1),t(z,{size:"x-small",color:s.status==="active"?"green":"grey",class:"mb-4",label:""},{default:l(()=>[n(u(s.status==="active"?"Активный":"Черновик"),1)]),_:2},1032,["color"]),o("div",G,[t(d,{variant:"flat",color:"grey-lighten-3",class:"flex-grow-1 text-none rounded-lg text-caption font-weight-bold text-grey-darken-3",height:"36",to:`/products/${s.id}`},{default:l(()=>[e[9]||(e[9]=n(" Редактировать ",-1)),t(g,{icon:"mdi-pencil",size:"small",class:"ml-1"})]),_:1},8,["to"]),t(d,{variant:"flat",color:"red-lighten-5",icon:"",rounded:"lg",size:"36",class:"ml-2",onClick:A=>w(s)},{default:l(()=>[t(g,{color:"red",icon:"mdi-trash-can-outline",size:"small"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(a(),i(v,{key:4,flat:"",class:"rounded-xl border",style:{"border-color":"#eee !important"}},{default:l(()=>[t(L,null,{default:l(()=>[e[12]||(e[12]=o("thead",{class:"bg-grey-lighten-4"},[o("tr",null,[o("th",{class:"text-left font-weight-bold py-4"},"Изображение"),o("th",{class:"text-left font-weight-bold"},"Название"),o("th",{class:"text-left font-weight-bold"},"Цена"),o("th",{class:"text-left font-weight-bold"},"Статус"),o("th",{class:"text-left font-weight-bold"},"Кол-во"),o("th",{class:"text-right font-weight-bold pr-10"},"Действие")])],-1)),o("tbody",null,[(a(!0),h(k,null,_(c(r).products,s=>(a(),h("tr",{key:s.id,class:"hover-row"},[o("td",W,[t(V,{color:"grey-lighten-4",width:"60",height:"60",class:"rounded-lg d-flex align-center justify-center"},{default:l(()=>[s.images?.length?(a(),i(C,{key:1,src:s.images[0],width:"60",height:"60",cover:"",class:"rounded-lg"},null,8,["src"])):(a(),i(g,{key:0,icon:"mdi-image-outline",color:"grey-lighten-1"}))]),_:2},1024)]),o("td",X,u(s.name),1),o("td",Y,u(p(s.price)),1),o("td",null,[t(z,{size:"x-small",color:s.status==="active"?"green":"grey",label:""},{default:l(()=>[n(u(s.status==="active"?"Активный":"Черновик"),1)]),_:2},1032,["color"])]),o("td",ee,u(s.quantity)+" шт",1),o("td",te,[t(d,{variant:"text",color:"blue",class:"text-none font-weight-medium",to:`/products/${s.id}`},{default:l(()=>[...e[10]||(e[10]=[n(" Редактировать ",-1)])]),_:1},8,["to"]),t(d,{variant:"text",color:"red",class:"text-none font-weight-medium",onClick:A=>w(s)},{default:l(()=>[...e[11]||(e[11]=[n(" Удалить ",-1)])]),_:1},8,["onClick"])])]))),128))])]),_:1})]),_:1})),t(F,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=s=>m.value=s),"max-width":"400"},{default:l(()=>[t(v,{class:"rounded-xl"},{default:l(()=>[t(N,{class:"text-h6 font-weight-bold pa-6 pb-2"},{default:l(()=>[...e[13]||(e[13]=[n(" Удалить товар? ",-1)])]),_:1}),t(R,{class:"px-6 pb-4"},{default:l(()=>[e[14]||(e[14]=n(" Вы уверены, что хотите удалить товар ",-1)),o("strong",null,u(x.value?.name),1),e[15]||(e[15]=n("? Это действие нельзя отменить. ",-1))]),_:1}),t(q,{class:"pa-6 pt-0"},{default:l(()=>[t(E),t(d,{variant:"text",class:"text-none",onClick:e[2]||(e[2]=s=>m.value=!1)},{default:l(()=>[...e[16]||(e[16]=[n("Отмена",-1)])]),_:1}),t(d,{color:"red",variant:"flat",class:"text-none font-weight-bold",rounded:"lg",loading:c(r).loading,onClick:$},{default:l(()=>[...e[17]||(e[17]=[n(" Удалить ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}),ie=P(le,[["__scopeId","data-v-d564aea2"]]);export{ie as default};
